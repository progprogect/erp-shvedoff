# üìã –ü–õ–ê–ù –ú–ò–ì–†–ê–¶–ò–ò PRODUCTION –ë–î

**–î–∞—Ç–∞:** 23.10.2025  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –°–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ Liberty Grade  
**–°—Ç–∞—Ç—É—Å:** üü° –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## üéØ –¶–ï–õ–¨ –ú–ò–ì–†–ê–¶–ò–ò

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–æ—Ä—Ç–∞ "–õ–∏–±–µ—Ä—Ç–∏" (Liberty) –≤ production –ë–î, —á—Ç–æ–±—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å staging.

---

## üìä –ê–ù–ê–õ–ò–ó –†–ê–ó–õ–ò–ß–ò–ô –ú–ï–ñ–î–£ STAGING –ò PRODUCTION

### ‚úÖ **–ß–¢–û –£–ñ–ï –ï–°–¢–¨ –í PRODUCTION:**

1. **–¢–∞–±–ª–∏—Ü—ã cutting_operations:**
   - ‚úÖ `actual_second_grade_quantity` - –µ—Å—Ç—å
   - ‚ùå `actual_liberty_grade_quantity` - **–û–¢–°–£–¢–°–¢–í–£–ï–¢**

2. **–¢–∞–±–ª–∏—Ü—ã cutting_progress_log:**
   - ‚úÖ `second_grade_quantity` - –µ—Å—Ç—å
   - ‚ùå `liberty_grade_quantity` - **–û–¢–°–£–¢–°–¢–í–£–ï–¢**

3. **–¢–∞–±–ª–∏—Ü—ã production_tasks:**
   - ‚ùå `second_grade_quantity` - **–û–¢–°–£–¢–°–¢–í–£–ï–¢**
   - ‚ùå `liberty_grade_quantity` - **–û–¢–°–£–¢–°–¢–í–£–ï–¢**

4. **–¢—Ä–∏–≥–≥–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `update_stock_from_cutting_progress`:**
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 2-–≥–æ —Å–æ—Ä—Ç–∞ - –µ—Å—Ç—å
   - ‚ùå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Liberty - **–û–¢–°–£–¢–°–¢–í–£–ï–¢**
   - ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê:** –°–æ–∑–¥–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏ (`2S-–ù–∞–∑–≤–∞–Ω–∏–µ–¢–æ–≤–∞—Ä–∞`)

### üìà **–ß–¢–û –ï–°–¢–¨ –í STAGING (—Ü–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ):**

1. **–¢–∞–±–ª–∏—Ü—ã cutting_operations:**
   - ‚úÖ `actual_second_grade_quantity`
   - ‚úÖ `actual_liberty_grade_quantity`

2. **–¢–∞–±–ª–∏—Ü—ã cutting_progress_log:**
   - ‚úÖ `second_grade_quantity`
   - ‚úÖ `liberty_grade_quantity`

3. **–¢–∞–±–ª–∏—Ü—ã production_tasks:**
   - ‚úÖ `second_grade_quantity`
   - ‚úÖ `liberty_grade_quantity`

4. **–¢—Ä–∏–≥–≥–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `update_stock_from_cutting_progress`:**
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 2-–≥–æ —Å–æ—Ä—Ç–∞
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Liberty
   - ‚úÖ **–ù–ï —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã** - —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç stock (—Å–æ–∑–¥–∞–Ω–∏–µ –≤ API)

---

## üîí –ë–≠–ö–ê–ü (–í–´–ü–û–õ–ù–ï–ù–û)

### ‚úÖ **–°–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –±—ç–∫–∞–ø—ã –≤ PRODUCTION:**

1. `cutting_operations_backup_20251023` - 7 –∑–∞–ø–∏—Å–µ–π
2. `cutting_progress_log_backup_20251023` - 3 –∑–∞–ø–∏—Å–∏
3. `production_tasks_backup_20251023` - 23 –∑–∞–ø–∏—Å–∏
4. `products_grades_backup_20251023` - 14 –∑–∞–ø–∏—Å–µ–π (—Ç–æ–≤–∞—Ä—ã —Å–æ —Å–æ—Ä—Ç–∞–º–∏)
5. `stock_grades_backup_20251023` - 14 –∑–∞–ø–∏—Å–µ–π (–æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å–æ—Ä—Ç–∞–º–∏)

### üìÅ **–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–Ω—ã –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:**

- `production_analysis_20251023_125147.txt` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ PRODUCTION –ë–î
- `staging_analysis_XXXXXX.txt` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ STAGING –ë–î

---

## üìù –ù–ï–û–ë–•–û–î–ò–ú–´–ï –ú–ò–ì–†–ê–¶–ò–ò

### **–ú–ò–ì–†–ê–¶–ò–Ø 1: `add_liberty_grade_fields.sql`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—è Liberty –≤ —Ç–∞–±–ª–∏—Ü—ã –æ–ø–µ—Ä–∞—Ü–∏–π —Ä–µ–∑–∫–∏.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –î–æ–±–∞–≤–ª—è–µ—Ç `actual_liberty_grade_quantity` –≤ `cutting_operations`
- –î–æ–±–∞–≤–ª—è–µ—Ç `liberty_grade_quantity` –≤ `cutting_progress_log`
- –°–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–ª–æ–Ω–∫–∞–º

**–†–∏—Å–∫–∏:** üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ —Å DEFAULT 0)

**–û—Ç–∫–∞—Ç:** –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ `ALTER TABLE ... DROP COLUMN`

---

### **–ú–ò–ì–†–ê–¶–ò–Ø 2: `add_production_grades_fields.sql`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Ä—Ç–∞ –∏ Liberty –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –î–æ–±–∞–≤–ª—è–µ—Ç `second_grade_quantity` –≤ `production_tasks`
- –î–æ–±–∞–≤–ª—è–µ—Ç `liberty_grade_quantity` –≤ `production_tasks`
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–ª–æ–Ω–∫–∞–º

**–†–∏—Å–∫–∏:** üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ —Å DEFAULT 0)

**–û—Ç–∫–∞—Ç:** –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ `ALTER TABLE ... DROP COLUMN`

---

### **–ú–ò–ì–†–ê–¶–ò–Ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ `update_stock_from_cutting_progress`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Liberty –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É `liberty_grade_quantity` –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ
- **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ç—Ä–∏–≥–≥–µ—Ä–∞
- –¢—Ä–∏–≥–≥–µ—Ä —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç stock, –∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ API

**–ß—Ç–æ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è:**

**–ë–´–õ–û –≤ PRODUCTION:**
```sql
-- –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–≤–∞–ª —Ç–æ–≤–∞—Ä—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏
INSERT INTO products (name, article, ...) 
VALUES (_target_product_name, '2S-' || _target_product_name, ...);
```

**–°–¢–ê–õ–û –≤ STAGING:**
```sql
-- –¢–æ–≤–∞—Ä—ã 2-–≥–æ —Å–æ—Ä—Ç–∞ –∏ –õ–∏–±–µ—Ä—Ç–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ API endpoint —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
-- Trigger —Ñ—É–Ω–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –≥–æ—Ç–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –∏ —Å–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–æ–≤–∞—Ä
```

**–†–∏—Å–∫–∏:** üü° –°—Ä–µ–¥–Ω–∏–µ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞)

**–û—Ç–∫–∞—Ç:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∏–∑ –±—ç–∫–∞–ø–∞

---

## ‚ö†Ô∏è –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### **–†–ò–°–ö 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑–∫–∏**

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è  
**–í–ª–∏—è–Ω–∏–µ:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
1. ‚úÖ –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ staging (—É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ 1-2 –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Ä–µ–∑–∫–∏
4. –ò–º–µ—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

---

### **–†–ò–°–ö 2: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã 2-–≥–æ —Å–æ—Ä—Ç–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏**

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è  
**–í–ª–∏—è–Ω–∏–µ:** üü° –°—Ä–µ–¥–Ω–µ–µ

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
1. –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–≤–∞—Ä—ã —Å –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏ –≤–∏–¥–∞ `2S-...`
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–∏–∫—É–ª–æ–≤
3. –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ –Ω–æ–≤—ã–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

### **–†–ò–°–ö 3: Downtime –≤–æ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏**

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è  
**–í–ª–∏—è–Ω–∏–µ:** üü° –°—Ä–µ–¥–Ω–µ–µ

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
1. –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ (<1 –º–∏–Ω—É—Ç—ã)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IF NOT EXISTS` –∏ `IF EXISTS` –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
3. –ü—Ä–æ–≤–æ–¥–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

---

## üìã –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### **–®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê** ‚úÖ

- [x] –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø—ã PRODUCTION –ë–î
- [x] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É STAGING –∏ PRODUCTION
- [x] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- [x] –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

---

### **–®–ê–ì 2: –í–´–ü–û–õ–ù–ï–ù–ò–ï –ú–ò–ì–†–ê–¶–ò–ô** (–æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **–ú–∏–≥—Ä–∞—Ü–∏—è 1:** `add_liberty_grade_fields.sql`
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ Liberty –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑–∫–∏
   - –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 5-10 —Å–µ–∫—É–Ω–¥

2. **–ú–∏–≥—Ä–∞—Ü–∏—è 2:** `add_production_grades_fields.sql`
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ —Å–æ—Ä—Ç–æ–≤ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
   - –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 5-10 —Å–µ–∫—É–Ω–¥

3. **–ú–∏–≥—Ä–∞—Ü–∏—è 3:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞
   - –ó–∞–º–µ–Ω—è–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä `update_stock_from_cutting_progress`
   - –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: 5-10 —Å–µ–∫—É–Ω–¥

**–û–ë–©–ï–ï –í–†–ï–ú–Ø:** ~30 —Å–µ–∫—É–Ω–¥

---

### **–®–ê–ì 3: –ü–†–û–í–ï–†–ö–ê** (–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î:**
   ```sql
   SELECT column_name, data_type 
   FROM information_schema.columns 
   WHERE table_name IN ('cutting_operations', 'cutting_progress_log', 'production_tasks')
     AND column_name LIKE '%liberty%' OR column_name LIKE '%grade%';
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä:**
   ```sql
   SELECT proname, pg_get_functiondef(oid) 
   FROM pg_proc 
   WHERE proname = 'update_stock_from_cutting_progress';
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é —Ä–µ–∑–∫–∏ —Å Liberty
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å Liberty
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—Å—Ç–∞—Ç–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π:**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø—É—Å–∫ —Å 2-–º —Å–æ—Ä—Ç–æ–º –∏ Liberty
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤

---

### **–®–ê–ì 4: –û–¢–ö–ê–¢ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)**

**–ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞:**

1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –±—ç–∫–∞–ø–∞:**
   ```sql
   DROP TABLE cutting_operations CASCADE;
   ALTER TABLE cutting_operations_backup_20251023 RENAME TO cutting_operations;
   
   DROP TABLE cutting_progress_log CASCADE;
   ALTER TABLE cutting_progress_log_backup_20251023 RENAME TO cutting_progress_log;
   
   DROP TABLE production_tasks CASCADE;
   ALTER TABLE production_tasks_backup_20251023 RENAME TO production_tasks;
   ```

2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä –∏–∑ production_analysis —Ñ–∞–π–ª–∞**

3. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏**

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

1. ‚úÖ –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ PRODUCTION –ë–î —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–æ STAGING
3. ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä `update_stock_from_cutting_progress` –æ–±–Ω–æ–≤–ª–µ–Ω
4. ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
6. ‚úÖ –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏
7. ‚úÖ –û—Å—Ç–∞—Ç–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üö® –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–ü–û–°–õ–ï –º–∏–≥—Ä–∞—Ü–∏–∏** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é backend –∏–∑ –≤–µ—Ç–∫–∏ `stage`, —Ç–∞–∫ –∫–∞–∫:
   - API —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è Liberty —Ç–æ–≤–∞—Ä–æ–≤
   - API —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è bulk-register (–±—Ä–∞–∫ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ stock)
   - Frontend —Å–æ–¥–µ—Ä–∂–∏—Ç UI –¥–ª—è Liberty –ø–æ–ª–µ–π

2. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã 2-–≥–æ —Å–æ—Ä—Ç–∞** —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞—Ä—Ç–∏–∫—É–ª–∞–º–∏ (`2S-...`) –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ –ë–î.
   - –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç)
   - –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –ø–æ–∑–∂–µ

3. **–ë—ç–∫–∞–ø—ã –Ω–µ —É–¥–∞–ª—è—Ç—å** –º–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏.

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Railway
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—ç–∫–∞–ø—ã –≤ –ø–∞–ø–∫–µ `backups/`
- –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –ø–ª–∞–Ω—É –≤—ã—à–µ

---

**–ì–û–¢–û–í–û –ö –ú–ò–ì–†–ê–¶–ò–ò:** üü° –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è




